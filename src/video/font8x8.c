#include "video/font8x8.h"

#include <stdint.h>

typedef struct {
  char c;
  uint8_t rows[8];
} glyph_t;

static const glyph_t k_glyphs[] = {
  {' ', {0, 0, 0, 0, 0, 0, 0, 0}},
  {':', {0, 0x18, 0x18, 0, 0x18, 0x18, 0, 0}},
  {'/', {0x02, 0x06, 0x0c, 0x18, 0x30, 0x60, 0x40, 0}},
  {'0', {0x3c, 0x66, 0x6e, 0x76, 0x66, 0x66, 0x3c, 0}},
  {'1', {0x18, 0x38, 0x18, 0x18, 0x18, 0x18, 0x3c, 0}},
  {'2', {0x3c, 0x66, 0x06, 0x1c, 0x30, 0x60, 0x7e, 0}},
  {'3', {0x3c, 0x66, 0x06, 0x1c, 0x06, 0x66, 0x3c, 0}},
  {'4', {0x0c, 0x1c, 0x3c, 0x6c, 0x7e, 0x0c, 0x0c, 0}},
  {'5', {0x7e, 0x60, 0x7c, 0x06, 0x06, 0x66, 0x3c, 0}},
  {'6', {0x1c, 0x30, 0x60, 0x7c, 0x66, 0x66, 0x3c, 0}},
  {'7', {0x7e, 0x66, 0x0c, 0x18, 0x18, 0x18, 0x18, 0}},
  {'8', {0x3c, 0x66, 0x66, 0x3c, 0x66, 0x66, 0x3c, 0}},
  {'9', {0x3c, 0x66, 0x66, 0x3e, 0x06, 0x0c, 0x38, 0}},
  {'A', {0x18, 0x3c, 0x66, 0x66, 0x7e, 0x66, 0x66, 0}},
  {'B', {0x7c, 0x66, 0x66, 0x7c, 0x66, 0x66, 0x7c, 0}},
  {'D', {0x78, 0x6c, 0x66, 0x66, 0x66, 0x6c, 0x78, 0}},
  {'E', {0x7e, 0x60, 0x60, 0x7c, 0x60, 0x60, 0x7e, 0}},
  {'I', {0x3c, 0x18, 0x18, 0x18, 0x18, 0x18, 0x3c, 0}},
  {'K', {0x66, 0x6c, 0x78, 0x70, 0x78, 0x6c, 0x66, 0}},
  {'L', {0x60, 0x60, 0x60, 0x60, 0x60, 0x60, 0x7e, 0}},
  {'M', {0x63, 0x77, 0x7f, 0x6b, 0x63, 0x63, 0x63, 0}},
  {'N', {0x66, 0x76, 0x7e, 0x6e, 0x66, 0x66, 0x66, 0}},
  {'O', {0x3c, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3c, 0}},
  {'P', {0x7c, 0x66, 0x66, 0x7c, 0x60, 0x60, 0x60, 0}},
  {'R', {0x7c, 0x66, 0x66, 0x7c, 0x78, 0x6c, 0x66, 0}},
  {'S', {0x3e, 0x60, 0x60, 0x3c, 0x06, 0x06, 0x7c, 0}},
  {'T', {0x7e, 0x5a, 0x18, 0x18, 0x18, 0x18, 0x3c, 0}},
  {'U', {0x66, 0x66, 0x66, 0x66, 0x66, 0x66, 0x3c, 0}},
  {'Y', {0x66, 0x66, 0x3c, 0x18, 0x18, 0x18, 0x3c, 0}},
};

bool font8x8_get_pixel(char c, uint8_t x, uint8_t y) {
  if (x >= 8u || y >= 8u) {
    return false;
  }
  for (unsigned i = 0; i < (sizeof(k_glyphs) / sizeof(k_glyphs[0])); ++i) {
    if (k_glyphs[i].c == c) {
      return ((k_glyphs[i].rows[y] >> (7u - x)) & 1u) != 0u;
    }
  }
  return false;
}
